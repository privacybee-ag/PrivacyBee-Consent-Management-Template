___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Privacybee consent manager",
  "categories": [
    "TAG_MANAGEMENT",
    "UTILITY"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "websiteId",
    "displayName": "Website ID",
    "simpleValueType": true,
    "help": "Enter your PrivacyBee Website ID (e.g., \u0027my-website-123\u0027). This ID connects your consent banner to your PrivacyBee configuration. Find it in your PrivacyBee dashboard",
    "notSetText": "Website ID cannot be empty. Please provide your PrivacyBee Website ID to continue."
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const injectScript = require('injectScript');
const setInWindow = require('setInWindow');
const createQueue = require('createQueue');
const copyFromWindow = require('copyFromWindow');
const queryPermission = require('queryPermission');

const websiteId = data.websiteId;
const dataLayerPush = createDataLayerQueue(); 

log('privacybee Consent Template initialized');

// This function acts like Function.prototype.apply, which does not work in the sandbox environment
function fnApply(fn, args) {
  switch (args.length) {
    case 0:
      return fn();
    case 1:
      return fn(args[0]);
    case 2:
      return fn(args[0], args[1]);
    case 3:
      return fn(args[0], args[1], args[2]);
    default:
      return fn(args[0], args[1], args[2], args[3]);
  }
}

// Create dataLayer queue with proper permissions (following Iubenda pattern)
function createDataLayerQueue() {
  log('privacybee: Checking dataLayer permission...');
  if (queryPermission('access_globals', 'readwrite', 'dataLayer')) {
    log('privacybee: dataLayer permission granted, creating queue');
    return createQueue('dataLayer');
  }
  log('privacybee: dataLayer permission DENIED, returning empty function');
  // biome-ignore lint/complexity/useArrowFunction: <explanation>
  const emptyFunction = function () {};
  return emptyFunction;
}

// Command processor function
function processDataLayerCommand(elem) {
  log('privacybee: processDataLayerCommand called with:', elem);
  if (typeof elem === 'object' && elem.length >= 2) {
    if (elem[0] === 'updateConsent') {
      log('privacybee: Processing updateConsent command');
      onUserConsent(elem[1]);
    } else if (elem[0] === 'ready') {
      log('privacybee: Processing ready command');
      onUserConsent(elem[1]);
    } else {
      log('privacybee: Unknown command type:', elem[0]);
    }
  }
}

// Set up privacybee queue system (following Iubenda pattern)
function setupPrivacybeeQueue() {
  log('privacybee: Setting up queue system');

  // Ensure _privacybee object exists
  const windowPrivacybee = copyFromWindow('_privacybee');
  if (!windowPrivacybee) {
    setInWindow('_privacybee', {});
  }

  // Create the queue
  const privacybeeQueue = createQueue('_privacybee.gtmQueue');
  log('privacybee: Queue created successfully');

  // Set up pushCommand function
  setInWindow(
    '_privacybee.gtmQueue.pushCommand',
    function privacybeeQueuePush() {
      fnApply(privacybeeQueue, arguments);
      fnApply(processDataLayerCommand, arguments);
    },
    true
  );
  log('privacybee: pushCommand function set up');

  // Process any existing queue items
  const windowQueue = copyFromWindow('_privacybee.gtmQueue');
  if (windowQueue) {
    log('privacybee: Processing existing queue items:', windowQueue.length);
    for (const item of windowQueue) {
      processDataLayerCommand(item);
    }
  }

  log('privacybee: Queue system setup completed');
}

// Initialize the queue system
setupPrivacybeeQueue();

/*
 * Called when consent changes
 */
const onUserConsent = (consent) => {
  log('privacybee: onUserConsent called with:', consent);

  const consentModeStates = {
    ad_storage: consent.AD_STORAGE ? 'granted' : 'denied',
    ad_user_data: consent.AD_USER_DATA ? 'granted' : 'denied',
    ad_personalization: consent.AD_PERSONALIZATION ? 'granted' : 'denied',
    analytics_storage: consent.ANALYTICS_STORAGE ? 'granted' : 'denied',
    functionality_storage: consent.FUNCTIONALITY_STORAGE ? 'granted' : 'denied',
    personalization_storage: consent.PERSONALIZATION_STORAGE ? 'granted' : 'denied',
    security_storage: 'granted',
  };

  log('privacybee: Calling updateConsentState with:', consentModeStates);
  updateConsentState(consentModeStates);
  log('privacybee: updateConsentState completed successfully');

  // Emit GTM event for custom tag triggers (enabled by default)
  log('privacybee: Emitting GTM consent event for custom triggers');
  log('privacybee: dataLayerPush function type:', typeof dataLayerPush);
  
  const eventData = {
    event: 'privacybee_gtm_consent_event',
    privacybee_consent: consentModeStates,
    privacybee_consent_boolean: consent,
  };
  log('privacybee: Pushing event data:', eventData);
  
  dataLayerPush(eventData);
  log('privacybee: GTM consent event emitted successfully');
};

log('privacybee: Setting default consent state');
// Set GDPR-compliant defaults
setDefaultConsentState({
  ad_storage: 'denied',
  ad_user_data: 'denied',
  ad_personalization: 'denied',
  analytics_storage: 'denied',
  functionality_storage: 'granted',
  personalization_storage: 'denied',
  security_storage: 'granted',
  wait_for_update: 500,
});
log('privacybee: Default consent state set');

log('privacybee: Setting banner config');
const bannerConfig = {
  websiteId: websiteId,
  apiEndpoint: 'https://app.privacybee.io',
  debug: true,
};
setInWindow('privacybeeCookieBannerConfig', bannerConfig);
log('privacybee: Banner config set:', bannerConfig);

// Verify the config is actually set in the window
const verifyConfig = copyFromWindow('privacybeeCookieBannerConfig');
log('privacybee: Verified config in window:', verifyConfig);

log('privacybee: Injecting script');
// Inject PrivacyBee script
const scriptUrl = 'https://app.privacybee.io/cookie-banner.js';

injectScript(
  scriptUrl,
  () => {
    log('privacybee: Script loaded successfully');
  },
  data.gtmOnFailure,
  undefined
);
log('privacybee: Script injection initiated');

log('privacybee: Calling gtmOnSuccess');
data.gtmOnSuccess();
log('privacybee: gtmOnSuccess called');


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "privacybeeCookieBannerConfig"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_privacybee"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_privacybee.gtmQueue"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_privacybee.gtmQueue.pushCommand"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://app.privacybee.io/cookie-banner.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Quick Test
  code: runCode();
setup: ''


___NOTES___

Created on 8/28/2025, 3:49:03 PM


